---
import SectionHeader from "./SectionHeader.astro";

const testimonials = [
  {
    name: "John Smith",
    role: "CTO",
    company: "TechCorp Inc.",
    content: "The loyalty engine has transformed how we engage with our customers. The ROI has been exceptional.",
    avatar: "https://randomuser.me/api/portraits/men/1.jpg"
  },
  {
    name: "Sarah Johnson",
    role: "Head of Marketing",
    company: "Retail Giants",
    content: "Implementation was smooth, and our customer retention has improved by 40% since using this solution.",
    avatar: "https://randomuser.me/api/portraits/women/2.jpg"
  },
  {
    name: "Mike Chen",
    role: "Product Manager",
    company: "E-commerce Plus",
    content: "The analytics and insights have been game-changing for our loyalty program strategy.",
    avatar: "https://randomuser.me/api/portraits/men/3.jpg"
  },
  {
    name: "Emma Wilson",
    role: "Customer Success Manager",
    company: "RetailTech Solutions",
    content: "The customization options are incredible. We've been able to create unique reward programs that perfectly align with our brand.",
    avatar: "https://randomuser.me/api/portraits/women/4.jpg"
  },
  {
    name: "David Kumar",
    role: "Operations Director",
    company: "Global Retail Chain",
    content: "The platform's analytics have helped us understand our customers better and make data-driven decisions.",
    avatar: "https://randomuser.me/api/portraits/men/5.jpg"
  },
  {
    name: "Lisa Zhang",
    role: "Digital Marketing Head",
    company: "Fashion Forward",
    content: "Our customer engagement metrics have shown remarkable improvement since implementing this loyalty engine.",
    avatar: "https://randomuser.me/api/portraits/women/6.jpg"
  }
];

// Split testimonials for two rows
const firstRowTestimonials = testimonials.slice(0, 3);
const secondRowTestimonials = testimonials.slice(3);
---

<section class="py-20 bg-white">
  <div class="container mx-auto px-4">
    <SectionHeader 
      tagline="Testimonials"
      heading="See What People Are Saying About Us" 
      subheading="" 
    />

    <div class="mt-16 relative">
      <!-- Gradient overlays -->
      <div class="absolute left-0 top-0 bottom-0 w-40 bg-gradient-to-r from-white to-transparent z-10"></div>
      <div class="absolute right-0 top-0 bottom-0 w-40 bg-gradient-to-l from-white to-transparent z-10"></div>
      
      <!-- First row -->
      <div class="overflow-hidden">
        <div class="marquee">
          <div class="marquee-content">
            {firstRowTestimonials.map((testimonial) => (
              <div class="flex-shrink-0 w-[350px] bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
                <div class="p-5">
                  <!-- Author info at the top -->
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                      <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold mr-3">
                        {testimonial.avatar ? (
                          <img 
                            src={testimonial.avatar} 
                            alt={testimonial.name} 
                            class="w-full h-full object-cover rounded-full"
                          />
                        ) : (
                          testimonial.name.charAt(0)
                        )}
                      </div>
                      <div>
                        <p class="font-medium text-gray-800">{testimonial.name}</p>
                        <p class="text-sm text-gray-500">{testimonial.role}</p>
                      </div>
                    </div>
                    <div class="text-sm font-medium text-gray-700">
                      {testimonial.company}
                    </div>
                  </div>
                  
                  <!-- Divider -->
                  <hr class="my-4" />
                  
                  <!-- Testimonial content at the bottom -->
                  <p class="text-gray-700 text-base leading-relaxed">
                    "{testimonial.content}"
                  </p>
                </div>
              </div>
            ))}
          </div>
          <div class="marquee-content" aria-hidden="true">
            {firstRowTestimonials.map((testimonial) => (
              <div class="flex-shrink-0 w-[350px] bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
                <div class="p-5">
                  <!-- Author info at the top -->
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                      <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold mr-3">
                        {testimonial.avatar ? (
                          <img 
                            src={testimonial.avatar} 
                            alt={testimonial.name} 
                            class="w-full h-full object-cover rounded-full"
                          />
                        ) : (
                          testimonial.name.charAt(0)
                        )}
                      </div>
                      <div>
                        <p class="font-medium text-gray-800">{testimonial.name}</p>
                        <p class="text-sm text-gray-500">{testimonial.role}</p>
                      </div>
                    </div>
                    <div class="text-sm font-medium text-gray-700">
                      {testimonial.company}
                    </div>
                  </div>
                  
                  <!-- Divider -->
                  <hr class="my-4" />
                  
                  <!-- Testimonial content at the bottom -->
                  <p class="text-gray-700 text-base leading-relaxed">
                    "{testimonial.content}"
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
      
      <!-- Second row -->
      <div class="overflow-hidden mt-8">
        <div class="marquee marquee-reverse">
          <div class="marquee-content">
            {secondRowTestimonials.map((testimonial) => (
              <div class="flex-shrink-0 w-[350px] bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
                <div class="p-5">
                  <!-- Author info at the top -->
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                      <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold mr-3">
                        {testimonial.avatar ? (
                          <img 
                            src={testimonial.avatar} 
                            alt={testimonial.name} 
                            class="w-full h-full object-cover rounded-full"
                          />
                        ) : (
                          testimonial.name.charAt(0)
                        )}
                      </div>
                      <div>
                        <p class="font-medium text-gray-800">{testimonial.name}</p>
                        <p class="text-sm text-gray-500">{testimonial.role}</p>
                      </div>
                    </div>
                    <div class="text-sm font-medium text-gray-700">
                      {testimonial.company}
                    </div>
                  </div>
                  
                  <!-- Divider -->
                  <hr class="my-4" />
                  
                  <!-- Testimonial content at the bottom -->
                  <p class="text-gray-700 text-base leading-relaxed">
                    "{testimonial.content}"
                  </p>
                </div>
              </div>
            ))}
          </div>
          <div class="marquee-content" aria-hidden="true">
            {secondRowTestimonials.map((testimonial) => (
              <div class="flex-shrink-0 w-[350px] bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden">
                <div class="p-5">
                  <!-- Author info at the top -->
                  <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                      <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-semibold mr-3">
                        {testimonial.avatar ? (
                          <img 
                            src={testimonial.avatar} 
                            alt={testimonial.name} 
                            class="w-full h-full object-cover rounded-full"
                          />
                        ) : (
                          testimonial.name.charAt(0)
                        )}
                      </div>
                      <div>
                        <p class="font-medium text-gray-800">{testimonial.name}</p>
                        <p class="text-sm text-gray-500">{testimonial.role}</p>
                      </div>
                    </div>
                    <div class="text-sm font-medium text-gray-700">
                      {testimonial.company}
                    </div>
                  </div>
                  
                  <!-- Divider -->
                  <hr class="my-4" />
                  
                  <!-- Testimonial content at the bottom -->
                  <p class="text-gray-700 text-base leading-relaxed">
                    "{testimonial.content}"
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .marquee {
    display: flex;
    width: 100%;
    overflow: hidden;
    user-select: none;
    gap: 0;
  }
  
  .marquee-content {
    display: flex;
    gap: 24px;
    padding-right: 24px;
    min-width: 100%;
    animation: scroll 40s linear infinite;
  }
  
  .marquee-reverse .marquee-content {
    animation: scroll-reverse 40s linear infinite;
  }
  
  @keyframes scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }
  
  @keyframes scroll-reverse {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }
  
  .marquee:hover .marquee-content {
    animation-play-state: paused;
  }
</style> 