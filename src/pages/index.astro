---
import Base from "@/layouts/Base.astro";
import { Clients } from "../components/Clients";
import { Offerings } from "../components/Offerings";
import CaseStudies from "../components/CaseStudies";
import FAQ from "../components/FAQ";
import { FeaturesGrid } from "../components/FeaturesGrid";
import { ScrollableServices } from "../components/ScrollableServices";
import { ProductSection } from "../components/ProductSection";
import { HomeBanner } from "../components/HomeBanner";
import { getEntry } from "astro:content";

import { sanityClient } from "sanity:client"

const HEADING_QUERY = `*[_type == "heading"]{
  _id,
  subtitle,
  title,
  description
}`;

const features = await sanityClient.fetch(`*[_type == "features"]{
  tagline,
  title,
  description,
  "imageUrl": image.asset->url,
  icon
}`)

const SERVICES_QUERY = `*[_type == "service"] | order(number asc) {
  _id,
  number,
  title,
  subheading,
  description,
  "imageUrl": image.asset->url
}`;


const headings = await sanityClient.fetch(HEADING_QUERY);
const services = await sanityClient.fetch(SERVICES_QUERY);
console.log(services)

---

<Base>
  <HomeBanner client:load />
  <Clients client:load />
  <Offerings client:load />
  <FeaturesGrid heading={headings[0]} features={features} client:load />
  <ScrollableServices services={services} client:load />
  <ProductSection client:load />
  <!-- <CaseStudies client:load /> -->
  <FAQ client:load variant="home" />
</Base>
