---
import Base from "@/layouts/Base.astro";
import AboutBanner from "../components/AboutBanner";
import AboutCompany from "../components/AboutCompany";
import LeadershipTeam from "../components/LeadershipTeam";
import WhyGreymetre from "../components/WhyGreymetre";
import NewFAQ from "../components/NewFAQ";
import { getEntry } from "astro:content";
import { sanityClient } from "sanity:client";
const about = await getEntry("about", "-index");
const { title, description, meta_title, image } = about.data;

const leadershipTeamQuery = `
*[_type == "leadershipTeam"][0] {
  leaders[] {
    name,
    title,
    description,
    linkedin,
    image
  }
}
`
const leadershipTeamData = await sanityClient.fetch(leadershipTeamQuery)

const About_Faq_QUery =`*[_type == "faqSection"] | order(_updatedAt asc) {
  _id,
  title,
  pageTitle,
  subtitle,
  description,
  list[] {
    title,
    description,
    active  
  }
}`

const aboutFaq = await sanityClient.fetch(About_Faq_QUery)
---

<Base
  title="About Greymetre | Business Transformation Partner"
  meta_title="About Greymetre - Sales, Supply Chain & Operations Excellence"
  description="Greymetre is a business transformation partner specializing in sales acceleration, supply chain excellence, operational optimization, and digital transformation."
  image={image}
>
  <AboutBanner client:load />
  <AboutCompany client:load />
  <LeadershipTeam client:load leadershipTeamData={leadershipTeamData} />
  <WhyGreymetre client:load />
  <NewFAQ client:load Faq={[aboutFaq[0]]}/>
</Base>
